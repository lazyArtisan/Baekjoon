# [Gold III] Скобки - 21653 

[문제 링크](https://www.acmicpc.net/problem/21653) 

### 성능 요약

메모리: 31552 KB, 시간: 64 ms

### 분류

누적 합

### 제출 일자

2024년 9월 24일 18:40:44

### 문제 설명

<p>Юная программистка Агнесса недавно узнала на уроке информатики об арифметических выражениях. Она заинтересовалась вопросом, что случится, если из арифметического выражения удалить всё, кроме скобок. Введя запрос в своём любимом поисковике, она выяснила, что математики называют последовательности скобок, которые могли бы встречаться в некотором арифметическом выражении, <em>правильными скобочными последовательностями</em>.</p>

<p>Так, последовательность <code>()(())</code> является правильной скобочной последовательностью, потому что она может, например, встречаться в выражении (2+2):(3–(5–2)+4), а последовательности <code>(()</code> и <code>())(</code> не являются таковыми. Легко видеть, что существует пять правильных скобочных последовательностей, состоящих ровно из шести скобок (по три скобки каждого типа — открывающих и закрывающих): <code>((()))</code>, <code>(()())</code>, <code>(())()</code>, <code>()(())</code> и <code>()()()</code>.</p>

<p>Агнесса заинтересовалась простейшими преобразованиями правильных скобочных последовательностей. Для начала Агнесса решила ограничиться добавлением скобок в последовательность. Она очень быстро выяснила, что после добавления одной скобки последовательность перестаёт быть правильной, а вот добавление двух скобок иногда сохраняет свойство правильности. Например, при добавлении двух скобок в различные места последовательности <code>()()</code> можно получить последовательности <code>(()())</code>, <code>(())()</code>, <code>()(())</code> и <code>()()()</code>. Легко видеть, что при любом способе добавления двух скобок с сохранением свойства правильности одна из новых скобок должна быть открывающей, а другая — закрывающей.</p>

<p>Агнесса хочет подсчитать количество различных способов добавления двух скобок в заданную правильную скобочную последовательность так, чтобы снова получилась правильная скобочная последовательность. К сожалению, выяснилось, что это количество может быть в некоторых случаях очень большим. Агнесса различает способы получения последовательности по позициям добавленных скобок в полученной последовательности. Например, даже при добавлении скобок в простейшую последовательность <code>()</code> можно получить другую правильную скобочную последовательность семью способами: <code><strong>()</strong>()</code>, <code><strong>(</strong>(<strong>)</strong>)</code>, <code><strong>(</strong>()<strong>)</strong></code>, <code>(<strong>()</strong>)</code>, <code>(<strong>(</strong>)<strong>)</strong></code>, <code>()<strong>()</strong></code>, <code>(<strong>)(</strong>)</code>. Здесь добавленные скобки выделены жирным шрифтом.</p>

<p>Таким образом, если в полученной последовательности добавленная открывающая скобка стоит в позиции i, а добавленная закрывающая — в позиции j, то два способа, соответствующие парам (i<sub>1</sub>, j<sub>1</sub>) и (i<sub>2</sub>, j<sub>2</sub>), считаются различными, если i<sub>1</sub>≠i<sub>2</sub> или j<sub>1</sub>≠j<sub>2</sub>.</p>

<p>Требуется написать программу, которая по заданной правильной скобочной последовательности определяет количество различных описанных выше способов добавления двух скобок.</p>

### 입력 

 <p>Входной файл состоит из одной непустой строки, содержащей ровно 2n символов: n открывающих и n закрывающих круглых скобок. Гарантируется, что эта строка является правильной скобочной последовательностью.</p>

### 출력 

 <p>Выведите в выходной файл количество различных способов добавления в заданную последовательность двух скобок таким образом, чтобы получилась другая правильная скобочная последовательность.</p>

